<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>JARVIS Pro</title>
  <style>
    :root {
      --jarvis-blue: #58a6ff;
      --jarvis-green: #3fb950;
      --jarvis-red: #ff7b72;
      --bg-dark: #0b0f17;
      --card-bg: rgba(15, 20, 30, 0.9);
      --text-light: #c9d1d9;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', system-ui, sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-light);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      box-sizing: border-box;
      line-height: 1.6;
    }
    .container {
      width: 100%;
      max-width: 800px;
      background: var(--card-bg);
      padding: 25px;
      border-radius: 16px;
      box-shadow: 0 0 30px rgba(88, 166, 255, 0.2);
      margin: auto;
    }
    h1 {
      color: var(--jarvis-blue);
      text-shadow: 0 0 15px rgba(88, 166, 255, 0.5);
      margin-top: 0;
      font-size: 2rem;
      text-align: center;
    }
    #response-container {
      margin: 25px 0;
      background-color: #161b22;
      padding: 20px;
      border-radius: 12px;
      min-height: 200px;
      max-height: 400px;
      overflow-y: auto;
      box-shadow: inset 0 0 15px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .message {
      padding: 10px 15px;
      border-radius: 8px;
      max-width: 80%;
      word-wrap: break-word;
    }
    .user-message {
      background: rgba(88, 166, 255, 0.15);
      border-left: 3px solid var(--jarvis-blue);
      align-self: flex-end;
    }
    .jarvis-message {
      background: rgba(63, 185, 80, 0.15);
      border-left: 3px solid var(--jarvis-green);
      align-self: flex-start;
    }
    .error-message {
      background: rgba(255, 123, 114, 0.15);
      border-left: 3px solid var(--jarvis-red);
    }
    .controls {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    button {
      background-color: var(--jarvis-green);
      color: white;
      padding: 12px 25px;
      font-size: 1.1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      flex: 1;
      min-width: 200px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    button:hover {
      background-color: #2ea043;
      transform: translateY(-2px);
    }
    button:active {
      transform: translateY(0);
    }
    #micButton.listening {
      animation: pulse 1.5s infinite;
      background-color: var(--jarvis-red);
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(255, 123, 114, 0.7); }
      70% { box-shadow: 0 0 0 12px rgba(255, 123, 114, 0); }
      100% { box-shadow: 0 0 0 0 rgba(255, 123, 114, 0); }
    }
    .status {
      text-align: center;
      margin: 15px 0;
      font-size: 0.9rem;
      color: #8b949e;
    }
    .command-list {
      background: rgba(22, 27, 34, 0.7);
      padding: 15px;
      border-radius: 8px;
      margin-top: 25px;
    }
    .command-list h3 {
      color: var(--jarvis-blue);
      margin-top: 0;
      margin-bottom: 10px;
    }
    .command-list ul {
      padding-left: 20px;
      margin: 0;
      columns: 2;
    }
    .command-list li {
      margin-bottom: 8px;
      break-inside: avoid;
    }
    @media (max-width: 600px) {
      .container {
        padding: 15px;
      }
      .command-list ul {
        columns: 1;
      }
      button {
        min-width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>JARVIS Pro</h1>
    <p style="text-align: center;">Speak naturally in English or Hindi. Your dual-language AI Assistant.</p>
    <div id="response-container">
      <div class="message jarvis-message">JARVIS: Initializing systems...</div>
    </div>
    <div class="status" id="status">Status: Ready</div>
    <div class="controls">
      <button id="micButton" onclick="toggleListening()">
        <span id="micIcon">üé§</span> <span id="micText">Start Listening</span>
      </button>
      <button onclick="resetConversation()">üîÑ Reset Conversation</button>
    </div>
    <div class="command-list">
      <h3>Available Commands:</h3>
      <ul>
        <li>"Open YouTube, WhatsApp, Instagram..."</li>
        <li>"Play music" or "lofi music"</li>
        <li>"What's the time?" or "Samay kya hai?"</li>
        <li>"Show me the news" or "Khabar dikhao"</li>
        <li>"How's the weather?" or "Mausam kaise hai?"</li>
        <li>"Who is [person]" or "Kaun hai [name]?"</li>
        <li>"Stop listening" or "Band ho jao"</li>
      </ul>
    </div>
  </div>
  <script>
    // JavaScript code will be injected here (due to length limit)
  const config = {
    userName: "Sir",
    assistantName: "JARVIS",
    defaultVoice: { lang: 'en-IN', rate: 1.0, pitch: 0.9 },
    appDeepLinks: {
      youtube: "vnd.youtube://",
      camera: "android.media.action.IMAGE_CAPTURE",
      gallery: "content://media/external/images/media",
      gmail: "googlegmail://",
      music: "com.google.android.music://",
      maps: "google.navigation://",
      whatsapp: "whatsapp://",
      instagram: "instagram://"
    },
    webFallbacks: {
      youtube: "https://youtube.com",
      music: "https://music.youtube.com",
      news: "https://news.google.com",
      maps: "https://maps.google.com",
      gmail: "https://mail.google.com",
      whatsapp: "https://web.whatsapp.com",
      instagram: "https://instagram.com"
    }
  };

  const micButton = document.getElementById("micButton");
  const micIcon = document.getElementById("micIcon");
  const micText = document.getElementById("micText");
  const statusElement = document.getElementById("status");
  const responseContainer = document.getElementById("response-container");
  let recognition, isListening = false;
  let maleEnglishVoice = null, maleHindiVoice = null;

  window.onload = () => {
    initializeJarvis();
  };

  function initializeJarvis() {
    loadVoices().then(() => {
      speak("‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§ö‡§æ‡§≤‡•Ç ‡§π‡•à‡•§ ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•à‡§∏‡•á ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Å?", 'hi');
      addMessage(config.assistantName, "‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à, ‡§∏‡§∞‡•§");
    });
  }

  function loadVoices() {
    return new Promise((resolve) => {
      function setVoices() {
        const voices = speechSynthesis.getVoices();
        maleEnglishVoice = voices.find(v => v.lang === 'en-IN' && v.name.toLowerCase().includes('male')) ||
                           voices.find(v => v.lang === 'en-IN');
        maleHindiVoice = voices.find(v => v.lang === 'hi-IN' && v.name.toLowerCase().includes('male')) ||
                         voices.find(v => v.lang === 'hi-IN');
        resolve();
      }
      if (speechSynthesis.getVoices().length > 0) {
        setVoices();
      } else {
        speechSynthesis.onvoiceschanged = setVoices;
      }
    });
  }

  function speak(text, lang = 'en') {
    if (speechSynthesis.speaking) speechSynthesis.cancel();
    const utter = new SpeechSynthesisUtterance(text);
    if (lang === 'hi' && maleHindiVoice) {
      utter.voice = maleHindiVoice;
      utter.lang = 'hi-IN';
    } else if (lang === 'en' && maleEnglishVoice) {
      utter.voice = maleEnglishVoice;
      utter.lang = 'en-IN';
    } else {
      utter.lang = config.defaultVoice.lang;
    }
    utter.pitch = config.defaultVoice.pitch;
    utter.rate = config.defaultVoice.rate;
    speechSynthesis.speak(utter);
  }

  function toggleListening() {
    isListening ? stopListening() : startListening();
  }

  function startListening() {
    recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "en-IN";
    recognition.onstart = () => {
      isListening = true;
      micButton.classList.add("listening");
      micIcon.textContent = "üõë";
      micText.textContent = "Listening...";
      statusElement.textContent = "Status: Listening...";
    };
    recognition.onresult = (event) => {
      const command = event.results[0][0].transcript;
      addMessage("You", command);
      processCommand(command.toLowerCase());
    };
    recognition.onerror = () => stopListening();
    recognition.onend = () => isListening && startListening();
    recognition.start();
  }

  function stopListening() {
    if (recognition) recognition.stop();
    isListening = false;
    micButton.classList.remove("listening");
    micIcon.textContent = "üé§";
    micText.textContent = "Start Listening";
    statusElement.textContent = "Status: Ready";
  }

  function processCommand(cmd) {
    const isHindi = /kya|kaun|kaise|mausam|samay|khabar/.test(cmd);
    const lang = isHindi ? 'hi' : 'en';

    if (cmd.includes("open")) {
      let key = Object.keys(config.appDeepLinks).find(k => cmd.includes(k));
      if (key) return openAppOrSite(key, lang === 'hi' ? `‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å ${key}` : `Opening ${key}`, lang);
    }

    if (cmd.includes("youtube")) return openAppOrSite("youtube", lang === 'hi' ? "‡§Ø‡•Ç‡§ü‡•ç‡§Ø‡•Ç‡§¨ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å" : "Opening YouTube", lang);
    if (cmd.includes("music") || cmd.includes("lofi")) return openAppOrSite("music", lang === 'hi' ? "‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§ö‡§≤‡§æ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å" : "Playing music", lang);
    if (cmd.includes("gmail")) return openAppOrSite("gmail", lang === 'hi' ? "‡§ú‡•Ä‡§Æ‡•á‡§≤ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å" : "Opening Gmail", lang);
    if (cmd.includes("instagram")) return openAppOrSite("instagram", lang === 'hi' ? "‡§á‡§Ç‡§∏‡•ç‡§ü‡§æ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å" : "Opening Instagram", lang);
    if (cmd.includes("whatsapp")) return openAppOrSite("whatsapp", lang === 'hi' ? "‡§µ‡•ç‡§π‡§æ‡§ü‡•ç‡§∏‡§è‡§™ ‡§ñ‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å" : "Opening WhatsApp", lang);
    if (cmd.includes("weather") || cmd.includes("mausam")) return openGoogleSearch("weather", lang);
    if (cmd.includes("news") || cmd.includes("khabar")) return openAppOrSite("news", lang === 'hi' ? "‡§§‡§æ‡§ú‡§º‡§æ ‡§ñ‡§¨‡§∞‡•á‡§Ç ‡§¶‡§ø‡§ñ‡§æ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å" : "Here are today's news", lang);
    if (cmd.includes("time") || cmd.includes("samay")) return tellTime(lang);
    if (cmd.includes("who is") || cmd.includes("kaun hai")) return openGoogleSearch(cmd, lang);
    if (cmd.includes("stop") || cmd.includes("band")) return stopListening();

    speak(lang === 'hi' ? "‡§Æ‡§æ‡§´‡§º ‡§ï‡•Ä‡§ú‡§ø‡§è, ‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§™‡§æ‡§Ø‡§æ‡•§" : "Sorry, I didn't understand.", lang);
    addMessage(config.assistantName, lang === 'hi' ? "‡§Æ‡•à‡§Ç ‡§∏‡§Æ‡§ù ‡§®‡§π‡•Ä‡§Ç ‡§™‡§æ‡§Ø‡§æ‡•§" : "Sorry, I didn't catch that.");
  }

  function openAppOrSite(key, message, lang) {
    speak(message, lang);
    addMessage(config.assistantName, message);
    const deep = config.appDeepLinks[key];
    const web = config.webFallbacks[key];
    const iframe = document.createElement("iframe");
    iframe.style.display = "none";
    iframe.src = deep;
    document.body.appendChild(iframe);
    setTimeout(() => {
      document.body.removeChild(iframe);
      if (!document.hidden && web) window.open(web, "_blank");
    }, 500);
  }

  function openGoogleSearch(query, lang) {
    speak(lang === 'hi' ? "‡§ó‡•Ç‡§ó‡§≤ ‡§™‡§∞ ‡§ñ‡•ã‡§ú ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å‡•§" : "Searching Google.", lang);
    window.open(`https://www.google.com/search?q=${encodeURIComponent(query)}`, "_blank");
  }

  function tellTime(lang) {
    const time = new Date().toLocaleTimeString('en-IN', { hour: '2-digit', minute: '2-digit' });
    const response = lang === 'hi' ? `‡§Ö‡§≠‡•Ä ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§π‡•à ${time}` : `It's ${time}`;
    speak(response, lang);
    addMessage(config.assistantName, response);
  }

  function addMessage(sender, text) {
    const msg = document.createElement("div");
    msg.className = "message";
    msg.classList.add(sender === config.assistantName ? "jarvis-message" : sender === "You" ? "user-message" : "error-message");
    msg.innerHTML = `<strong>${sender}:</strong> ${text}`;
    responseContainer.appendChild(msg);
    responseContainer.scrollTop = responseContainer.scrollHeight;
  }

  function resetConversation() {
    responseContainer.innerHTML = '';
    addMessage(config.assistantName, "Conversation reset. Ready when you are.");
    speak("Conversation reset. Ready when you are.");
  }
</script>
</body>
</html>
